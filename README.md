# Senflare-DNS-IP

Cloudflare优选域名DNS解析器 - 自动解析、检测和识别Cloudflare优选域名的IP状态和详情信息

## 功能特性

- 🔍 **智能DNS解析**: 支持多DNS服务器并发解析域名，获取更多IP地址
- 🌐 **运营商分流**: 支持电信、联通、移动等运营商DNS，获取最优IP
- 📡 **并发检测**: 多线程并发检测IP可用性，大幅提升检测速度
- 🌍 **地区识别**: 自动识别IP地理位置，支持缓存机制
- 📊 **智能缓存**: 支持TTL机制，减少重复查询，提升效率
- 📝 **详细日志**: 完整的运行日志，便于调试和监控
- ⏰ **自动运行**: GitHub Actions每3小时自动执行

## 文件说明

- `DNSIPtest.py` - 主程序脚本
- `YXhost-lite.txt` - 当前使用的域名列表（精简版）
- `YXhost.txt` - 完整域名列表（用于添加更多优选域名）
- `Cache.json` - 地区信息缓存文件
- `DNSIPlist.txt` - 可用IP列表（输出）
- `SenflareDNS.txt` - 格式化结果（输出）

## 使用方法

### 1. 配置域名列表

编辑 `YXhost-lite.txt` 文件，每行一个域名：

```
# Cloudflare优选域名列表
# 格式：域名#描述信息（可选）
# 每行一个域名，以#开头，用于说明

# 当前示例
orange.seeck.cn#简睿 | 三网专线 | 01
saas.sin.fan#MIYU | 三网专线
cf.877774.xyz#秋名山 | 三网专线
```

### 2. 本地运行

```bash
# 运行脚本
python DNSIPtest.py
```

**注意**：依赖包已嵌入到GitHub Actions配置中，本地运行需要安装：
- `requests>=2.31.0`
- `dnspython>=2.4.0`
- `urllib3>=2.0.0`

### 3. GitHub Actions自动运行

项目已配置GitHub Actions，每3小时自动运行一次，结果会自动提交到仓库。

## 输出格式

### DNSIPlist.txt
```
1.2.3.4
5.6.7.8
9.10.11.12
```

### SenflareDNS.txt
```
113.200.109.19#CN 中国节点 | 01
172.64.145.64#US 美国节点 | 01
104.18.41.190#US 美国节点 | 02
104.18.42.163#US 美国节点 | 03
172.64.53.24#US 美国节点 | 04
```

## 配置说明

### DNS服务器
- 阿里云DNS: 223.5.5.5, 223.6.6.6
- 腾讯DNS: 119.29.29.29, 182.254.116.116
- 百度DNS: 180.76.76.76
- 114 DNS: 114.114.114.114, 114.114.115.115
- 360 DNS: 101.226.4.6, 218.30.118.6
- 搜狗DNS: 123.125.81.6, 140.207.198.6
- 中国联通DNS: 123.123.123.123, 123.123.123.124

### 测试端口
- 默认测试443端口（HTTPS）
- 可在配置中修改测试端口列表

### 性能设置
- 最大并发线程数: 15
- 批量处理大小: 8
- DNS解析超时: 5秒
- 重试超时: 3秒
- 缓存TTL: 7天

## 日志说明

程序运行时会生成详细的日志信息，包括：
- 🔍 DNS解析过程
- 📡 IP可用性检测
- 🌍 地区识别结果
- 📊 统计信息

## 性能测试

- **测试结果**: 36个IP，9.93秒完成
- **DNS解析成功率**: 100%（13/13个DNS服务器）
- **IP检测成功率**: 100%（36/36个IP可用）
- **地区识别**: 支持中国、美国等地区

## 注意事项

1. 确保 `YXhost-lite.txt` 文件存在且包含有效的域名
2. 程序会自动创建缓存文件 `Cache.json`
3. 输出文件会在每次运行时重新生成
4. GitHub Actions需要仓库的写入权限
5. 电信和移动DNS服务器暂时注释（网络环境限制）

## 许可证

MIT License
